<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" href="#">
	<title>{% block title %}SAP{% endblock %}</title>
	<link rel="stylesheet" href="/static/aplicaciones/bootstrap/css/bootstrap.min.css"/>
	<link href="/static/aplicaciones/bootstrap/css/sticky-footer-navbar.css" rel="stylesheet"/>
	<link rel="stylesheet" href="/static/aplicaciones/bootstrap/css/bootstrap-theme.min.css"/>
	<script src="/static/aplicaciones/js/jquery.min.js"></script>
	<script src="/static/aplicaciones/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Alternar navegacion</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">SAP</a>
			</div>
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					{% if user.is_authenticated %}
					<li><a href="{% url 'vista_inicio' %}">Inicio</a>
					<li class="dropdown">
              			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Administracion <b class="caret"></b></a>
              			<ul class="dropdown-menu">
                			<li><a href="{% url 'vista_gestion_usuarios' %}">Gestionar usuarios</a></li>
                			<li><a href="{% url 'vista_gestion_roles' %}">Gestionar roles</a></li>
                			<li><a href="{% url 'vista_gestion_tipos_atributo' %}">Gestionar tipos atributo</a></li>
                			<li><a href="{% url 'vista_gestion_proyectos' %}">Gestionar proyectos</a></li>
              			</ul>
            		</li>
					{% else %}
					<li><a href="{% url 'vista_login' %}">Iniciar sesion</a></li>
					{% endif %}
				</ul>
				{% if user.is_authenticated %}
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">Usuario {{ user.username }} <b class="caret"></b></a>
						<ul class="dropdown-menu">
                			<li><a href="{% url 'vista_cambiar_contrasenha' id_usuario=user.id %}">Cambiar contrase√±a</a></li>
                			<li><a href="{% url 'vista_logout' %}">Cerrar sesion</a></li>
              			</ul>
              		</li>
              	</ul>
				{% endif %}
			</div>
		</div>
	</div>
	
	<div class="container">
		{% block content %}
		{% endblock %}
	</div>
	
	<div id="footer">
      <div class="container">
        <p class="text-muted">&copy; SAP 2014 - Django 1.6.2</p>
      </div>
    </div>
    <script src="/static/aplicaciones/bootstrap/js/bootstrap-datepicker.js"></script>
   	<script>
		if (top.location != location) {
    		top.location.href = document.location.href ;
  		}
		$(function(){
			window.prettyPrint && prettyPrint();
			$('#dp1').datepicker({
				format: 'mm-dd-yyyy'
			});
			$('#dp2').datepicker();
			$('#dp3').datepicker();
			$('#dp3').datepicker();
			$('#dpYears').datepicker();
			$('#dpMonths').datepicker();
			
			var startDate = new Date(2012,1,20);
			var endDate = new Date(2012,1,25);
			$('#dp4').datepicker()
				.on('changeDate', function(ev){
					if (ev.date.valueOf() > endDate.valueOf()){
						$('#alert').show().find('strong').text('The start date can not be greater then the end date');
					} else {
						$('#alert').hide();
						startDate = new Date(ev.date);
						$('#startDate').text($('#dp4').data('date'));
					}
					$('#dp4').datepicker('hide');
				});
			$('#dp5').datepicker()
				.on('changeDate', function(ev){
					if (ev.date.valueOf() < startDate.valueOf()){
						$('#alert').show().find('strong').text('The end date can not be less then the start date');
					} else {
						$('#alert').hide();
						endDate = new Date(ev.date);
						$('#endDate').text($('#dp5').data('date'));
					}
					$('#dp5').datepicker('hide');
				});

        // disabling dates
        var nowTemp = new Date();
        var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);

        var checkin = $('#dpd1').datepicker({
        	onRender: function(date) {
            	return date.valueOf() < now.valueOf() ? 'disabled' : '';
         	}
        }).on('changeDate', function(ev) {
        	if (ev.date.valueOf() > checkout.date.valueOf()) {
        		var newDate = new Date(ev.date)
            	newDate.setDate(newDate.getDate() + 1);
            	checkout.setValue(newDate);
        	}
        	checkin.hide();
        	$('#dpd2')[0].focus();
        }).data('datepicker');
        var checkout = $('#dpd2').datepicker({
        	onRender: function(date) {
            	return date.valueOf() <= checkin.date.valueOf() ? 'disabled' : '';
       		}
        }).on('changeDate', function(ev) {
        	checkout.hide();
        }).data('datepicker');
		});
	</script>
</body>
</html>